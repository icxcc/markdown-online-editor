(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2121a7bb"],{"64eb":function(t,e,n){},a752:function(t,e,n){"use strict";var o=n("64eb"),i=n.n(o);i.a},d835:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"export-page"},[n("div",{staticClass:"button-group"},[n("el-button",{attrs:{round:""},on:{click:t.onBackToMainPage}},[t._v("返回主页")]),n("el-button",{attrs:{round:"",type:"primary"},on:{click:t.onExportBtnClick}},[t._v(t._s(t.btnTextStr))])],1),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],attrs:{id:"export-vditor","element-loading-text":"正在努力，请稍候..."}})])},i=[],a=(n("6762"),n("96cf"),n("3b8d")),r=n("ff41"),s=n.n(r),c=n("70b0"),u=n.n(c),d=n("d67e"),l=n.n(d),p=n("21a6"),g=n("358c"),m={name:"export-page",data:function(){return{isLoading:!0,btnTextStr:""}},created:function(){this.btnTextStr=g["b"][this.$route.path]},components:{},mounted:function(){var t=this;this.initVditor(),this.$nextTick(Object(a["a"])(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=document.getElementsByClassName("vditor-textarea"),n[0].style.display="none",e.next=4,t.vditor.getHTML(!0);case 4:t.isLoading=!1;case 5:case"end":return e.stop()}},e)})))},methods:{initVditor:function(){var t={cache:!1,width:"61.8%",preview:{delay:1e3,show:!0}};this.vditor=new s.a("export-vditor",t);var e=localStorage.getItem("vditorvditor");this.vditor.setValue(e)},exportAndSaveImg:function(t,e,n){var o="download"in document.createElement("a");o?this.exportImgUseDownload(t,e,n):this.exportImgUseFileSaver(t,e,n)},exportImgUseDownload:function(t,e,n){var o=this,i={png:"toPng",jpeg:"toJpeg"};u.a[i[e]](t).then(function(t){console.log("this.isLoading",o.isLoading),o.isLoading=!1;var e=document.createElement("a");e.download=n,e.href=t,e.click()}).catch(function(t){console.error("Oops, Something went wrong!",t)})},exportImgUseFileSaver:function(t,e,n){var o=this;u.a.toBlob(t).then(function(t){o.isLoading=!1,Object(p["saveAs"])(t,n)}).catch(function(t){console.error("Oops, Something went wrong!",t)})},exportToPdf:function(t,e,n){var o={margin:1,filename:n,image:{type:e,quality:1},html2canvas:{scale:2},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}};l()().set(o).from(t).save(),this.isLoading=!1},getExportTimestamp:function(){var t=new Date,e=t.getFullYear(),n=this.$utils.makeUpZero(t.getMonth()+1),o=this.$utils.makeUpZero(t.getDate()),i=this.$utils.makeUpZero(t.getHours()),a=this.$utils.makeUpZero(t.getMinutes()),r=this.$utils.makeUpZero(t.getSeconds());return"".concat(e).concat(n).concat(o,"-").concat(i).concat(a).concat(r)},onBackToMainPage:function(){this.$router.push("/")},onExportBtnClick:function(){this.isLoading=!0;var t=document.getElementsByClassName("vditor-preview")[0],e=this.$route.params.type,n=["png","jpeg","webp"],o=n.includes(e),i=this.getExportTimestamp(),a="arya-".concat(i,".").concat(e);o?this.exportAndSaveImg(t,e,a):this.exportToPdf(t,e,a)}}},h=m,v=(n("a752"),n("2877")),f=Object(v["a"])(h,o,i,!1,null,null,null);e["default"]=f.exports}}]);